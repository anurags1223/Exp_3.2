<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Library â€” Book Management</title>
<link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Karla:wght@300;400;500;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --cream: #f5f0e8;
  --cream-dark: #ede6d6;
  --ink: #1a1612;
  --ink-mid: #3d342a;
  --ink-light: #7a6e62;
  --rust: #b84c2b;
  --rust-dim: rgba(184,76,43,0.1);
  --gold: #c9913a;
  --rule: #cfc5b0;
  --white: #faf7f2;
  --radius: 4px;
  --shadow: 0 2px 12px rgba(26,22,18,0.10);
}

body {
  font-family: 'Karla', sans-serif;
  background: var(--cream);
  color: var(--ink);
  min-height: 100vh;
  background-image:
    repeating-linear-gradient(
      0deg,
      transparent,
      transparent 31px,
      rgba(207,197,176,0.35) 31px,
      rgba(207,197,176,0.35) 32px
    );
}

#root { max-width: 1100px; margin: 0 auto; padding: 0 20px 60px; }

.masthead {
  text-align: center;
  padding: 36px 0 24px;
  border-bottom: 3px double var(--ink);
  margin-bottom: 32px;
  position: relative;
}

.masthead-vol {
  font-family: 'Karla', sans-serif;
  font-size: 0.7rem;
  letter-spacing: 0.22em;
  text-transform: uppercase;
  color: var(--ink-light);
  margin-bottom: 8px;
}

.masthead h1 {
  font-family: 'Libre Baskerville', serif;
  font-size: clamp(2.4rem, 5vw, 3.8rem);
  font-weight: 700;
  letter-spacing: -0.01em;
  line-height: 1;
  color: var(--ink);
}

.masthead-sub {
  font-family: 'Libre Baskerville', serif;
  font-style: italic;
  font-size: 1rem;
  color: var(--ink-light);
  margin-top: 8px;
}

.masthead-rule {
  margin: 14px auto 0;
  width: 60px;
  height: 3px;
  background: var(--rust);
}

.toolbar {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 14px;
  align-items: center;
  margin-bottom: 28px;
  flex-wrap: wrap;
}

.search-wrap {
  position: relative;
}

.search-wrap svg {
  position: absolute;
  left: 14px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--ink-light);
  pointer-events: none;
}

.search-input {
  width: 100%;
  padding: 13px 14px 13px 42px;
  font-family: 'Karla', sans-serif;
  font-size: 0.95rem;
  background: var(--white);
  border: 1.5px solid var(--rule);
  border-radius: var(--radius);
  color: var(--ink);
  outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.search-input::placeholder { color: var(--ink-light); }
.search-input:focus {
  border-color: var(--rust);
  box-shadow: 0 0 0 3px var(--rust-dim);
}

.btn-primary {
  padding: 13px 22px;
  background: var(--rust);
  color: var(--white);
  font-family: 'Karla', sans-serif;
  font-size: 0.88rem;
  font-weight: 600;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  border: none;
  border-radius: var(--radius);
  cursor: pointer;
  white-space: nowrap;
  transition: background 0.2s, transform 0.15s;
  display: flex;
  align-items: center;
  gap: 8px;
}

.btn-primary:hover { background: #9e3f22; transform: translateY(-1px); }
.btn-primary:active { transform: translateY(0); }

.stats-bar {
  display: flex;
  gap: 24px;
  padding: 12px 0;
  border-top: 1px solid var(--rule);
  border-bottom: 1px solid var(--rule);
  margin-bottom: 28px;
  overflow-x: auto;
}

.stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  min-width: 80px;
}

.stat-num {
  font-family: 'Libre Baskerville', serif;
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--rust);
}

.stat-label {
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--ink-light);
}

.genre-tabs {
  display: flex;
  gap: 6px;
  margin-bottom: 28px;
  flex-wrap: wrap;
}

.genre-tab {
  padding: 6px 14px;
  font-family: 'Karla', sans-serif;
  font-size: 0.8rem;
  font-weight: 500;
  border: 1.5px solid var(--rule);
  border-radius: 50px;
  background: transparent;
  color: var(--ink-mid);
  cursor: pointer;
  transition: all 0.2s;
}

.genre-tab:hover { border-color: var(--rust); color: var(--rust); }
.genre-tab.active {
  background: var(--ink);
  color: var(--cream);
  border-color: var(--ink);
}

.books-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 20px;
  margin-bottom: 40px;
}

.book-card {
  background: var(--white);
  border: 1px solid var(--rule);
  border-radius: var(--radius);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  box-shadow: var(--shadow);
  animation: slideIn 0.3s ease both;
  transition: box-shadow 0.25s, transform 0.25s;
}

@keyframes slideIn {
  from { opacity: 0; transform: translateY(12px); }
  to   { opacity: 1; transform: translateY(0); }
}

.book-card:hover {
  box-shadow: 0 8px 28px rgba(26,22,18,0.14);
  transform: translateY(-3px);
}

.book-spine {
  height: 5px;
  background: var(--rust);
}

.book-card[data-genre="Fiction"] .book-spine    { background: #6b8c6e; }
.book-card[data-genre="Non-Fiction"] .book-spine { background: #5a7fa8; }
.book-card[data-genre="Science"] .book-spine     { background: #7d5fa8; }
.book-card[data-genre="History"] .book-spine     { background: var(--gold); }
.book-card[data-genre="Philosophy"] .book-spine  { background: #b84c2b; }
.book-card[data-genre="Biography"] .book-spine   { background: #c45e7a; }
.book-card[data-genre="Technology"] .book-spine  { background: #3a8c8c; }

.book-body {
  padding: 18px 18px 14px;
  flex: 1;
}

.book-genre-tag {
  display: inline-block;
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 0.16em;
  color: var(--ink-light);
  margin-bottom: 10px;
  font-weight: 600;
}

.book-title {
  font-family: 'Libre Baskerville', serif;
  font-size: 1.08rem;
  line-height: 1.35;
  color: var(--ink);
  margin-bottom: 6px;
}

.book-author {
  font-family: 'Libre Baskerville', serif;
  font-style: italic;
  font-size: 0.88rem;
  color: var(--ink-light);
  margin-bottom: 12px;
}

.book-meta {
  display: flex;
  gap: 16px;
  font-size: 0.75rem;
  color: var(--ink-light);
}

.book-meta span { display: flex; align-items: center; gap: 4px; }

.book-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 18px;
  border-top: 1px solid var(--cream-dark);
}

.book-status {
  font-size: 0.72rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  padding: 4px 10px;
  border-radius: 50px;
}

.status-available {
  background: rgba(107,140,110,0.15);
  color: #4a7a4d;
}

.status-borrowed {
  background: rgba(201,145,58,0.15);
  color: #a07020;
}

.btn-remove {
  background: none;
  border: 1.5px solid var(--rule);
  border-radius: var(--radius);
  padding: 6px 12px;
  font-family: 'Karla', sans-serif;
  font-size: 0.75rem;
  color: var(--ink-light);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 5px;
  transition: all 0.2s;
}

.btn-remove:hover {
  border-color: var(--rust);
  color: var(--rust);
  background: var(--rust-dim);
}

.empty-state {
  text-align: center;
  padding: 80px 20px;
  grid-column: 1/-1;
}

.empty-state-icon {
  font-size: 3rem;
  margin-bottom: 16px;
  opacity: 0.4;
}

.empty-state h3 {
  font-family: 'Libre Baskerville', serif;
  font-size: 1.3rem;
  color: var(--ink-mid);
  margin-bottom: 8px;
}

.empty-state p {
  font-size: 0.9rem;
  color: var(--ink-light);
}

.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(26,22,18,0.55);
  backdrop-filter: blur(3px);
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  animation: fadeIn 0.2s ease;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

.modal {
  background: var(--white);
  border-radius: 8px;
  width: 100%;
  max-width: 480px;
  box-shadow: 0 24px 64px rgba(26,22,18,0.3);
  animation: modalIn 0.25s cubic-bezier(0.22,1,0.36,1);
}

@keyframes modalIn {
  from { opacity: 0; transform: translateY(20px) scale(0.97); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}

.modal-header {
  padding: 24px 24px 0;
  border-bottom: 2px solid var(--ink);
  padding-bottom: 16px;
  margin-bottom: 24px;
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
}

.modal-header h2 {
  font-family: 'Libre Baskerville', serif;
  font-size: 1.35rem;
  color: var(--ink);
}

.modal-header p {
  font-size: 0.82rem;
  color: var(--ink-light);
  font-style: italic;
  margin-top: 3px;
}

.btn-close {
  background: none;
  border: none;
  cursor: pointer;
  color: var(--ink-light);
  font-size: 1.3rem;
  line-height: 1;
  padding: 2px;
  transition: color 0.2s;
}

.btn-close:hover { color: var(--rust); }

.modal-body { padding: 0 24px 24px; }

.form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }

.form-group {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-bottom: 16px;
}

.form-group label {
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--ink-mid);
}

.form-control {
  padding: 11px 13px;
  font-family: 'Karla', sans-serif;
  font-size: 0.92rem;
  background: var(--cream);
  border: 1.5px solid var(--rule);
  border-radius: var(--radius);
  color: var(--ink);
  outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
  width: 100%;
}

.form-control:focus {
  border-color: var(--rust);
  box-shadow: 0 0 0 3px var(--rust-dim);
}

.form-control.error { border-color: var(--rust); }

.error-msg {
  font-size: 0.72rem;
  color: var(--rust);
  margin-top: 2px;
}

.form-actions {
  display: flex;
  gap: 10px;
  justify-content: flex-end;
  margin-top: 8px;
}

.btn-secondary {
  padding: 11px 18px;
  background: transparent;
  border: 1.5px solid var(--rule);
  border-radius: var(--radius);
  font-family: 'Karla', sans-serif;
  font-size: 0.88rem;
  color: var(--ink-mid);
  cursor: pointer;
  transition: all 0.2s;
}

.btn-secondary:hover {
  border-color: var(--ink);
  color: var(--ink);
}

.toast {
  position: fixed;
  bottom: 28px;
  right: 28px;
  background: var(--ink);
  color: var(--cream);
  padding: 14px 20px;
  border-radius: var(--radius);
  font-size: 0.88rem;
  display: flex;
  align-items: center;
  gap: 10px;
  box-shadow: 0 8px 24px rgba(26,22,18,0.3);
  z-index: 200;
  animation: toastIn 0.3s cubic-bezier(0.22,1,0.36,1);
}

@keyframes toastIn {
  from { opacity: 0; transform: translateY(12px); }
  to   { opacity: 1; transform: translateY(0); }
}

.toast-icon { font-size: 1rem; }

@media (max-width: 600px) {
  .toolbar { grid-template-columns: 1fr; }
  .form-row { grid-template-columns: 1fr; }
  .books-grid { grid-template-columns: 1fr; }
  .stats-bar { gap: 16px; }
}
</style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
const { useState, useMemo, useEffect, useCallback } = React;

const GENRES = ["All", "Fiction", "Non-Fiction", "Science", "History", "Philosophy", "Biography", "Technology"];

const INITIAL_BOOKS = [
  { id: 1, title: "The Brothers Karamazov", author: "Fyodor Dostoevsky", genre: "Fiction", year: 1880, pages: 824, status: "available" },
  { id: 2, title: "Sapiens", author: "Yuval Noah Harari", genre: "History", year: 2011, pages: 443, status: "borrowed" },
  { id: 3, title: "A Brief History of Time", author: "Stephen Hawking", genre: "Science", year: 1988, pages: 212, status: "available" },
  { id: 4, title: "Meditations", author: "Marcus Aurelius", genre: "Philosophy", year: 180, pages: 254, status: "available" },
  { id: 5, title: "The Innovators", author: "Walter Isaacson", genre: "Technology", year: 2014, pages: 542, status: "borrowed" },
  { id: 6, title: "Leonardo da Vinci", author: "Walter Isaacson", genre: "Biography", year: 2017, pages: 624, status: "available" },
];

const EMPTY_FORM = { title: "", author: "", genre: "Fiction", year: new Date().getFullYear(), pages: "", status: "available" };

function Toast({ message, icon, onDone }) {
  useEffect(() => {
    const t = setTimeout(onDone, 2800);
    return () => clearTimeout(t);
  }, [onDone]);
  return (
    <div className="toast">
      <span className="toast-icon">{icon}</span>
      {message}
    </div>
  );
}

function BookCard({ book, onRemove }) {
  return (
    <div className="book-card" data-genre={book.genre} style={{ animationDelay: "0ms" }}>
      <div className="book-spine" />
      <div className="book-body">
        <span className="book-genre-tag">{book.genre}</span>
        <h3 className="book-title">{book.title}</h3>
        <p className="book-author">by {book.author}</p>
        <div className="book-meta">
          <span>ðŸ“… {book.year}</span>
          <span>ðŸ“„ {book.pages} pp.</span>
        </div>
      </div>
      <div className="book-footer">
        <span className={`book-status ${book.status === "available" ? "status-available" : "status-borrowed"}`}>
          {book.status === "available" ? "âœ“ Available" : "âŠ˜ Borrowed"}
        </span>
        <button className="btn-remove" onClick={() => onRemove(book.id)}>
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.2">
            <polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14H6L5 6"/>
            <path d="M10 11v6M14 11v6"/><path d="M9 6V4h6v2"/>
          </svg>
          Remove
        </button>
      </div>
    </div>
  );
}

function AddBookModal({ onClose, onAdd }) {
  const [form, setForm] = useState(EMPTY_FORM);
  const [errors, setErrors] = useState({});

  const validate = () => {
    const e = {};
    if (!form.title.trim()) e.title = "Title is required";
    if (!form.author.trim()) e.author = "Author is required";
    if (!form.pages || form.pages < 1) e.pages = "Enter valid page count";
    if (!form.year || form.year < 0) e.year = "Enter a valid year";
    setErrors(e);
    return Object.keys(e).length === 0;
  };

  const handleSubmit = () => {
    if (!validate()) return;
    onAdd({ ...form, id: Date.now(), pages: Number(form.pages), year: Number(form.year) });
  };

  const set = (key, val) => {
    setForm(f => ({ ...f, [key]: val }));
    setErrors(e => ({ ...e, [key]: undefined }));
  };

  return (
    <div className="modal-overlay" onClick={e => e.target === e.currentTarget && onClose()}>
      <div className="modal">
        <div className="modal-header">
          <div>
            <h2>Catalogue New Book</h2>
            <p>Add a volume to the collection</p>
          </div>
          <button className="btn-close" onClick={onClose}>âœ•</button>
        </div>
        <div className="modal-body">
          <div className="form-group">
            <label>Book Title *</label>
            <input className={`form-control ${errors.title ? "error" : ""}`} placeholder="e.g. The Great Gatsby" value={form.title} onChange={e => set("title", e.target.value)} />
            {errors.title && <span className="error-msg">{errors.title}</span>}
          </div>
          <div className="form-group">
            <label>Author *</label>
            <input className={`form-control ${errors.author ? "error" : ""}`} placeholder="e.g. F. Scott Fitzgerald" value={form.author} onChange={e => set("author", e.target.value)} />
            {errors.author && <span className="error-msg">{errors.author}</span>}
          </div>
          <div className="form-row">
            <div className="form-group">
              <label>Genre</label>
              <select className="form-control" value={form.genre} onChange={e => set("genre", e.target.value)}>
                {GENRES.filter(g => g !== "All").map(g => <option key={g}>{g}</option>)}
              </select>
            </div>
            <div className="form-group">
              <label>Status</label>
              <select className="form-control" value={form.status} onChange={e => set("status", e.target.value)}>
                <option value="available">Available</option>
                <option value="borrowed">Borrowed</option>
              </select>
            </div>
          </div>
          <div className="form-row">
            <div className="form-group">
              <label>Year *</label>
              <input className={`form-control ${errors.year ? "error" : ""}`} type="number" placeholder="2024" value={form.year} onChange={e => set("year", e.target.value)} />
              {errors.year && <span className="error-msg">{errors.year}</span>}
            </div>
            <div className="form-group">
              <label>Pages *</label>
              <input className={`form-control ${errors.pages ? "error" : ""}`} type="number" placeholder="320" value={form.pages} onChange={e => set("pages", e.target.value)} />
              {errors.pages && <span className="error-msg">{errors.pages}</span>}
            </div>
          </div>
          <div className="form-actions">
            <button className="btn-secondary" onClick={onClose}>Cancel</button>
            <button className="btn-primary" onClick={handleSubmit}>
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5">
                <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
              </svg>
              Add to Library
            </button>
          </div>
        </div>
      </div>
    </div>
  );
}

function App() {
  const [books, setBooks] = useState(INITIAL_BOOKS);
  const [search, setSearch] = useState("");
  const [activeGenre, setActiveGenre] = useState("All");
  const [showModal, setShowModal] = useState(false);
  const [toast, setToast] = useState(null);

  const showToast = useCallback((message, icon = "âœ“") => {
    setToast({ message, icon, key: Date.now() });
  }, []);

  const filtered = useMemo(() => {
    const q = search.toLowerCase();
    return books.filter(b => {
      const matchGenre = activeGenre === "All" || b.genre === activeGenre;
      const matchSearch = !q || b.title.toLowerCase().includes(q) || b.author.toLowerCase().includes(q) || b.genre.toLowerCase().includes(q);
      return matchGenre && matchSearch;
    });
  }, [books, search, activeGenre]);

  const stats = useMemo(() => ({
    total: books.length,
    available: books.filter(b => b.status === "available").length,
    borrowed: books.filter(b => b.status === "borrowed").length,
    genres: new Set(books.map(b => b.genre)).size,
  }), [books]);

  const handleAdd = useCallback((book) => {
    setBooks(prev => [book, ...prev]);
    setShowModal(false);
    showToast(`"${book.title}" added to library`, "ðŸ“š");
  }, [showToast]);

  const handleRemove = useCallback((id) => {
    const book = books.find(b => b.id === id);
    setBooks(prev => prev.filter(b => b.id !== id));
    showToast(`"${book.title}" removed`, "ðŸ—‘");
  }, [books, showToast]);

  return (
    <div>
      <header className="masthead">
        <p className="masthead-vol">Est. MMXXIV &nbsp;Â·&nbsp; Vol. I &nbsp;Â·&nbsp; The Reading Room</p>
        <h1>The Library</h1>
        <p className="masthead-sub">A catalogue of knowledge &amp; imagination</p>
        <div className="masthead-rule" />
      </header>

      <div className="stats-bar">
        <div className="stat"><span className="stat-num">{stats.total}</span><span className="stat-label">Total Books</span></div>
        <div className="stat"><span className="stat-num">{stats.available}</span><span className="stat-label">Available</span></div>
        <div className="stat"><span className="stat-num">{stats.borrowed}</span><span className="stat-label">Borrowed</span></div>
        <div className="stat"><span className="stat-num">{stats.genres}</span><span className="stat-label">Genres</span></div>
        <div className="stat"><span className="stat-num">{filtered.length}</span><span className="stat-label">Showing</span></div>
      </div>

      <div className="toolbar">
        <div className="search-wrap">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
            <circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>
          </svg>
          <input
            className="search-input"
            type="text"
            placeholder="Search by title, author, or genreâ€¦"
            value={search}
            onChange={e => setSearch(e.target.value)}
          />
        </div>
        <button className="btn-primary" onClick={() => setShowModal(true)}>
          <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5">
            <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
          </svg>
          Add Book
        </button>
      </div>

      <div className="genre-tabs">
        {GENRES.map(g => (
          <button key={g} className={`genre-tab ${activeGenre === g ? "active" : ""}`} onClick={() => setActiveGenre(g)}>
            {g}
          </button>
        ))}
      </div>

      <div className="books-grid">
        {filtered.length === 0 ? (
          <div className="empty-state">
            <div className="empty-state-icon">ðŸ“­</div>
            <h3>No books found</h3>
            <p>{search ? `No results for "${search}" â€” try a different query.` : "This shelf is empty. Add a book to get started."}</p>
          </div>
        ) : filtered.map(book => (
          <BookCard key={book.id} book={book} onRemove={handleRemove} />
        ))}
      </div>

      {showModal && <AddBookModal onClose={() => setShowModal(false)} onAdd={handleAdd} />}

      {toast && (
        <Toast key={toast.key} message={toast.message} icon={toast.icon} onDone={() => setToast(null)} />
      )}
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App />);
</script>
</body>
</html>